<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DemiPay v5.5 ‚Äî Money Moves</title>

  <!-- Existing stylesheets (keep these) -->
  <link rel="stylesheet" href="./src/css/global.css" />
  <link rel="stylesheet" href="./src/css/dashboard.css" />

  <style>
    /* ===== Theme & Accent ===== */
    :root {
      --accent-color: #2dd4bf;
      --gradient-accent: linear-gradient(90deg, #2dd4bf, #3b82f6);
      --bg-card: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --border: #e2e8f0;
    }
    body.dark-mode {
      --bg-card: #0b1220;
      --text: #e5e7eb;
      --muted: #9aa4b2;
      --border: #1f2937;
    }

    /* ===== Top Bar (brand + controls) ===== */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: var(--bg-card);
      border-bottom: 1px solid var(--border);
      box-shadow: 0 2px 10px rgba(0,0,0,0.04);
      backdrop-filter: blur(6px);
    }
    .topbar-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 800;
      color: var(--text);
    }
    .brand .logo { font-size: 18px }
    .brand .version {
      font-size: 11px;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: 999px;
      background: #eef2ff;
      color: #4f46e5;
    }
    body.dark-mode .brand .version { background:#111827; color:#93c5fd }

    .controls {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn, .user-menu-btn {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 8px 12px; border: 1px solid var(--border); border-radius: 10px;
      background: var(--bg-card); color: var(--text); cursor: pointer;
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
    }
    .btn:hover, .user-menu-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 14px rgba(0,0,0,.08) }
    .btn-primary {
      background: var(--gradient-accent); color: #fff; border: none;
      animation: pulse 2.5s ease-in-out infinite;
    }
    @keyframes pulse {
      0%,100% { box-shadow: 0 0 0 0 rgba(45,212,191,.35) }
      50%     { box-shadow: 0 0 0 10px rgba(45,212,191,0) }
    }

    .user-menu { position: relative }
    .user-menu-dropdown {
      position: absolute; right: 0; top: calc(100% + 8px);
      min-width: 180px; padding: 6px;
      background: var(--bg-card); color: var(--text);
      border: 1px solid var(--border); border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      display: none;
    }
    .user-menu-dropdown.show { display: block; animation: fadeIn .18s ease-in-out }
    .menu-item { display:flex; align-items:center; gap:8px; padding:10px 10px; border-radius:10px; color:inherit; text-decoration:none }
    .menu-item:hover { background:#f8fafc }
    body.dark-mode .menu-item:hover { background:#0f172a }
    .menu-divider { height:1px; background:var(--border); margin:6px 4px }

    @keyframes fadeIn { from{opacity:0; transform:translateY(-6px)} to{opacity:1; transform:translateY(0)} }

    /* ===== Page Wrappers ===== */
    .main-content { padding: 24px 16px }
    .container { max-width: 1100px; margin: 0 auto }

    /* ===== Cards / banners ===== */
    .balance-card, .banner, .action-card, .service-card {
      background: var(--bg-card); color: var(--text);
      border: 1px solid var(--border); border-radius: 16px;
      box-shadow: 0 4px 16px rgba(0,0,0,.04);
      transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
    }
    .action-card:hover, .service-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 26px rgba(0,0,0,.08);
      border-color: #c7d2fe;
    }

    .action-grid, .services-grid {
      display: grid; gap: 14px;
      grid-template-columns: repeat(4, minmax(0, 1fr));
    }
    @media (max-width: 900px) { .action-grid, .services-grid { grid-template-columns: repeat(2, 1fr) } }
    @media (max-width: 560px) { .action-grid, .services-grid { grid-template-columns: 1fr } }

    .action-card, .service-card { padding: 16px }
    .action-icon { font-size: 22px }
    .action-title { display:block; font-weight:700; margin-top:6px }
    .action-desc { font-size: 12px; color: var(--muted) }

    .banner { display:flex; gap:10px; align-items:center; padding:12px 14px; margin:14px 0 }
    .banner-emoji { font-size: 18px }
    .banner-text h4 { margin:0; font-size: 14px }
    .banner-text p  { margin:2px 0 0; font-size: 12px; color:var(--muted) }

    /* ===== Transactions ===== */
    .transactions-list { display:flex; flex-direction:column; gap:10px }
    .transaction-item {
      display:flex; align-items:center; justify-content:space-between;
      padding:12px; border:1px solid var(--border); border-radius:12px; background:var(--bg-card)
    }
    .tx-left { display:flex; align-items:center; gap:10px }
    .tx-icon { width:36px; height:36px; display:grid; place-items:center; border-radius:10px }
    .tx-icon.receive { background:#ecfdf5; color:#047857 }
    .tx-icon.send    { background:#fef2f2; color:#b91c1c }
    body.dark-mode .tx-icon.receive { background:#052e2b; color:#34d399 }
    body.dark-mode .tx-icon.send    { background:#2a0f12; color:#fca5a5 }

    .tx-meta small { color: var(--muted) }
    .amount { font-weight:800 }
    .amount.positive { color:#16a34a }
    .amount.negative { color:#dc2626 }
    .status { font-size: 11px; padding:3px 8px; border-radius:999px; border:1px solid var(--border) }
    .status.completed { background:#ecfeff; color:#155e75; border-color:#a5f3fc }
    .status.pending   { background:#fff7ed; color:#9a3412; border-color:#fed7aa }

    /* ===== Scroll To Top ===== */
    #scrollTopBtn {
      position: fixed; bottom: 24px; right: 24px; width: 44px; height: 44px;
      border: none; border-radius: 999px; cursor: pointer; display: none;
      background: var(--gradient-accent); color:#fff; font-size:18px; align-items:center; justify-content:center;
      box-shadow: 0 10px 24px rgba(0,0,0,.18); transition: transform .15s, box-shadow .15s; z-index: 999;
    }
    #scrollTopBtn.show { display:flex; animation: fadeInUp .25s ease forwards }
    #scrollTopBtn:hover { transform: translateY(-2px) scale(1.02) }

    @keyframes fadeInUp { from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)} }

    /* ===== Toasts ===== */
    .toast {
      position: fixed; top: 18px; right: 18px; padding: 12px 18px; border-radius: 12px;
      color: #fff; font-weight: 600; z-index: 10000; opacity: 0; transform: translateY(-10px);
      transition: all .35s ease; box-shadow: 0 8px 24px rgba(0,0,0,.18);
    }
    .toast-success { background: linear-gradient(90deg, #22c55e, #16a34a) }
    .toast-warning { background: linear-gradient(90deg, #facc15, #f59e0b) }
    .toast-error   { background: linear-gradient(90deg, #ef4444, #dc2626) }
  </style>
</head>

<body>
  <!-- ===== Top Bar ===== -->
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand" onclick="location.href='index.html'" style="cursor:pointer">
        <span class="logo">üöÄ</span>
        <span>DemiPay</span>
        <span class="version">v5.5</span>
      </div>

      <div class="controls">
        <button class="btn" id="themeToggle"><span id="themeIcon">üåô</span><span id="themeText">Dark Mode</span></button>

        <div class="user-menu">
          <button class="user-menu-btn" id="userMenuBtn">
            <img id="userAvatar" src="./src/assets/user.png" alt="User" style="width:20px;height:20px;border-radius:999px" />
            <span id="userName">Demi</span>
            <span>‚ñº</span>
          </button>
          <div class="user-menu-dropdown" id="userMenuDropdown">
            <a href="#" class="menu-item"><span>üë§</span><span>Profile</span></a>
            <a href="#" class="menu-item"><span>‚öôÔ∏è</span><span>Settings</span></a>
            <div class="menu-divider"></div>
            <a href="#" class="menu-item" id="logoutBtn"><span>üö™</span><span>Logout</span></a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- ===== Main ===== -->
  <main class="main-content">
    <div class="container">
      <!-- Welcome -->
      <section class="welcome-section">
        <h1>Welcome back, Demi <span style="filter:hue-rotate(-10deg)">üëã</span></h1>
        <p>Here's what's happening with your wallet today.</p>
      </section>

      <!-- Balance -->
      <section class="balance-section">
        <div class="balance-card" style="padding:16px">
          <div class="balance-header" style="display:flex;align-items:center;justify-content:space-between;gap:12px">
            <div>
              <p class="balance-label" style="margin:0;color:var(--muted)">Total Balance</p>
              <h2 class="balance-amount" id="balanceAmount" style="margin:6px 0 2px">$0.00</h2>
              <p class="wallet-address" id="walletAddress" style="margin:0;color:var(--muted)">Wallet: Loading...</p>
              <p class="wallet-meta" style="margin:8px 0 0;color:var(--muted)">
                Account No: <strong>DP-1029345678</strong><br />
                KYC Level: <span class="kyc-level">Tier 2 (Verified)</span>
              </p>
            </div>
            <button class="btn btn-primary" id="refreshBalanceBtn">üîÑ Refresh</button>
          </div>
        </div>
      </section>

      <!-- Banners -->
      <section class="banner banner-security">
        <span class="banner-emoji">üîí</span>
        <div class="banner-text">
          <h4>Security</h4>
          <p>Your wallet is protected with encryption and OTP verification.</p>
        </div>
      </section>

      <section class="banner banner-finance">
        <span class="banner-emoji">üíπ</span>
        <div class="banner-text">
          <h4>Finance Updates</h4>
          <p>FX Update: ‚Ç¶1 ‚âà $0.0013 ‚Ä¢ Earn +5% APY bonus this week!</p>
        </div>
      </section>

      <!-- Money Moves -->
      <section class="money-moves">
        <h3>Money Moves</h3>
        <div class="action-grid">
          <button class="action-card" id="sendMoneyBtn">
            <span class="action-icon">üí∏</span>
            <span class="action-title">Send Money</span>
            <span class="action-desc">Instant P2P Transfer</span>
          </button>
          <button class="action-card" id="receiveMoneyBtn">
            <span class="action-icon">üì•</span>
            <span class="action-title">Receive Money</span>
            <span class="action-desc">QR & Account Share</span>
          </button>
          <button class="action-card" id="addMoneyBtn">
            <span class="action-icon">‚ûï</span>
            <span class="action-title">Add / Withdraw</span>
            <span class="action-desc">Card or Bank (Mock)</span>
          </button>
          <button class="action-card" id="bankTransferBtn">
            <span class="action-icon">üè¶</span>
            <span class="action-title">Bank Transfer</span>
            <span class="action-desc">Multi-Region Banks</span>
          </button>
        </div>
      </section>

      <!-- Services -->
      <section class="quick-services" style="margin-top:14px">
        <h3>Services</h3>
        <div class="services-grid">
          <div class="service-card" data-service="fx">üåç
            <h4>Cross-Border Remittance</h4><p>Preview FX & Send Abroad</p>
          </div>
          <div class="service-card" data-service="savings">üí∞
            <h4>Savings</h4><p>Create ‚Ä¢ Add ‚Ä¢ Withdraw ‚Ä¢ SO</p>
          </div>
          <div class="service-card" data-service="bills">üí°
            <h4>Pay Bills & Top-Up</h4><p>Bundles ‚Ç¶500‚Äì‚Ç¶5 000</p>
          </div>
          <div class="service-card" data-service="cards">üí≥
            <h4>Virtual & Linked Cards</h4><p>Add ‚Ä¢ Link ‚Ä¢ Set Default</p>
          </div>
          <div class="service-card" data-service="payonline">üõí
            <h4>Pay Online</h4><p>Checkout Simulation</p>
          </div>
          <div class="service-card" data-service="shop">üè¨
            <h4>Shop on the Fly</h4><p>Affiliate Redirection</p>
          </div>
          <div class="service-card" data-service="invest">üìà
            <h4>Investments & Stocks</h4><p>Mock Buy/Sell & Portfolio</p>
          </div>
          <div class="service-card" data-service="agent">üßç‚Äç‚ôÇÔ∏è
            <h4>Become an Agent</h4><p>Photo Upload + NIN</p>
          </div>
        </div>
      </section>

      <!-- Agent Modal -->
      <div id="agentModal" class="modal-overlay hidden" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.45); z-index: 2000; align-items:center; justify-content:center;">
        <div class="modal" style="width: 520px; max-width: calc(100% - 24px); background:var(--bg-card); color:var(--text); border:1px solid var(--border); border-radius:16px; box-shadow:0 20px 60px rgba(0,0,0,.25);">
          <div class="modal-header" style="display:flex; align-items:center; justify-content:space-between; padding:16px 16px 8px;">
            <h3 style="margin:0">Become an Agent</h3>
            <button class="btn" id="closeAgentModal">‚úï</button>
          </div>
          <div class="modal-body" style="padding: 8px 16px 16px">
            <form id="agentForm">
              <div class="form-group" style="margin-bottom:10px">
                <label>Full Name</label>
                <input type="text" id="agentFullName" class="form-control" placeholder="John Doe" required style="width:100%;padding:10px;border:1px solid var(--border);border-radius:10px;background:transparent;color:var(--text)">
              </div>
              <div class="form-group" style="margin-bottom:10px">
                <label>National Identification Number (NIN)</label>
                <input type="text" id="agentNIN" class="form-control" maxlength="11" placeholder="Enter 11-digit NIN" required style="width:100%;padding:10px;border:1px solid var(--border);border-radius:10px;background:transparent;color:var(--text)">
              </div>
              <div class="form-group" style="margin-bottom:10px">
                <label>Upload or Capture Photo ID</label>
                <input type="file" id="agentPhoto" class="form-control" accept="image/*" capture="camera" required style="width:100%;padding:10px;border:1px solid var(--border);border-radius:10px;background:transparent;color:var(--text)">
              </div>
            </form>
          </div>
          <div class="modal-footer" style="display:flex;justify-content:flex-end;gap:10px; padding: 0 16px 16px">
            <button class="btn" id="cancelAgentBtn">Cancel</button>
            <button class="btn btn-primary" id="submitAgentBtn">Submit Application</button>
          </div>
        </div>
      </div>

      <!-- Transactions -->
      <section class="transactions-section" style="margin-top:18px">
        <div class="section-header" style="display:flex;align-items:center;justify-content:space-between">
          <h3>Recent Transactions</h3>
          <button class="btn" id="viewAllBtn">View All</button>
        </div>
        <div id="transactionsList" class="transactions-list"></div>
        <div style="margin-top:10px; display:flex; justify-content:center">
          <button class="btn" id="loadMoreBtn">Load More Transactions</button>
        </div>
      </section>
    </div>
  </main>

  <!-- Scroll to Top -->
  <button id="scrollTopBtn" title="Back to Top">‚¨ÜÔ∏è</button>

  <!-- Toast Container (created dynamically but keep id for CSS hook) -->
  <div id="globalToast" style="display:none"></div>

  <script>
    /* -----------------------------
       Minimal Mock State / Helpers
    ------------------------------*/
    const currentUser = { id: "u_001", full_name: "Demi Olawoye", preferences: { theme: localStorage.getItem("demipay_theme") || "light" } };
    const mockBalance = { balance: 0, wallet_address: "dp_0xF3...9b1" };

    // Toast
    function showToast(type, message) {
      let t = document.getElementById("globalToast");
      if (!t) { t = document.createElement("div"); t.id = "globalToast"; document.body.appendChild(t); }
      t.className = `toast toast-${type}`;
      t.textContent = message;
      t.style.display = "block";
      requestAnimationFrame(() => { t.style.opacity = "1"; t.style.transform = "translateY(0)"; });
      setTimeout(() => { t.style.opacity = "0"; t.style.transform = "translateY(-10px)"; setTimeout(() => t.style.display = "none", 350); }, 2600);
    }

    // Theme
    function applySavedTheme() {
      const saved = localStorage.getItem("demipay_theme") || currentUser.preferences.theme || "light";
      if (saved === "dark") {
        document.body.classList.add("dark-mode");
        document.getElementById("themeIcon").textContent = "‚òÄÔ∏è";
        document.getElementById("themeText").textContent = "Light Mode";
      }
    }
    function toggleTheme() {
      document.body.classList.toggle("dark-mode");
      const isDark = document.body.classList.contains("dark-mode");
      localStorage.setItem("demipay_theme", isDark ? "dark" : "light");
      document.getElementById("themeIcon").textContent = isDark ? "‚òÄÔ∏è" : "üåô";
      document.getElementById("themeText").textContent = isDark ? "Light Mode" : "Dark Mode";
      showToast("success", isDark ? "üåô Dark Mode Enabled" : "‚òÄÔ∏è Light Mode Restored");
    }

    // Currency/date
    const fmtCurrency = a => new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a);
    function fmtDate(date) {
      const d = new Date(date), now = new Date(), diff = now - d, days = Math.floor(diff / (1000*60*60*24));
      if (days === 0) return "Today " + d.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});
      if (days === 1) return "Yesterday " + d.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});
      if (days < 7) return `${days} days ago`;
      return d.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});
    }

    /* -----------------------------
       Mock Transactions + Renderer
    ------------------------------*/
    const ALL_TX = [
      { id:"t1", type:"receive",  counterparty:"Ada Lovelace",   note:"Project payout", amount: 480.00, status:"completed", created_at:"2025-10-30T09:22:00Z" },
      { id:"t2", type:"send",     counterparty:"Netflix",        note:"Monthly subscription", amount: -15.99, status:"completed", created_at:"2025-10-28T20:10:00Z" },
      { id:"t3", type:"receive",  counterparty:"Upwork Ltd",     note:"Freelance income", amount: 250.00, status:"completed", created_at:"2025-10-26T13:10:00Z" },
      { id:"t4", type:"send",     counterparty:"Bolt",           note:"Ride to Heathrow", amount: -21.30, status:"completed", created_at:"2025-10-26T07:55:00Z" },
      { id:"t5", type:"send",     counterparty:"Tesco",          note:"Groceries", amount: -42.70, status:"pending", created_at:"2025-10-25T18:30:00Z" },
      { id:"t6", type:"receive",  counterparty:"Stripe Payout",  note:"Store sales", amount: 1_200.00, status:"completed", created_at:"2025-10-22T10:45:00Z" },
      { id:"t7", type:"send",     counterparty:"Spotify",        note:"Music", amount: -9.99, status:"completed", created_at:"2025-10-20T21:05:00Z" },
      { id:"t8", type:"receive",  counterparty:"Friend (Chi)",   note:"Refund", amount: 35.00, status:"completed", created_at:"2025-10-18T14:12:00Z" },
      { id:"t9", type:"send",     counterparty:"Amazon",         note:"Order #114-9393", amount: -68.45, status:"completed", created_at:"2025-10-17T16:25:00Z" },
      { id:"t10",type:"receive",  counterparty:"HMRC",           note:"Tax rebate", amount: 90.00, status:"completed", created_at:"2025-10-15T08:10:00Z" }
    ];
    let txCursor = 0; // how many rendered

    function renderTransactions(append=false) {
      const list = document.getElementById("transactionsList");
      if (!append) list.innerHTML = "";

      const next = ALL_TX.slice(txCursor, txCursor + 5);
      next.forEach(tx => {
        const isIn = tx.type === "receive";
        const row = document.createElement("div");
        row.className = "transaction-item";
        row.innerHTML = `
          <div class="tx-left">
            <div class="tx-icon ${isIn ? "receive":"send"}">${isIn ? "üì•":"üí∏"}</div>
            <div class="tx-meta">
              <div><strong>${isIn ? "Received from":"Sent to"} ${tx.counterparty}</strong></div>
              <small>${tx.note || "No description"} ‚Ä¢ ${fmtDate(tx.created_at)}</small>
            </div>
          </div>
          <div class="tx-right" style="display:flex;align-items:center;gap:10px">
            <div class="amount ${tx.amount >= 0 ? "positive":"negative"}">
              ${tx.amount >= 0 ? "+" : ""}${fmtCurrency(Math.abs(tx.amount))}
            </div>
            <span class="status ${tx.status}">${tx.status}</span>
          </div>
        `;
        list.appendChild(row);
      });

      txCursor += next.length;
      if (txCursor >= ALL_TX.length) document.getElementById("loadMoreBtn").style.display = "none";
    }

    /* -----------------------------
       Modal (agent) ‚Äì open/close
    ------------------------------*/
    function openAgentModal(){ const m=document.getElementById("agentModal"); m.style.display="flex"; document.body.style.overflow="hidden"; }
    function closeAgentModal(){ const m=document.getElementById("agentModal"); m.style.display="none"; document.body.style.overflow="auto"; document.getElementById("agentForm").reset(); }

    /* -----------------------------
       Init
    ------------------------------*/
    document.addEventListener("DOMContentLoaded", () => {
      // Theme init
      applySavedTheme();

      // User menu
      const menuBtn = document.getElementById("userMenuBtn");
      const dropdown = document.getElementById("userMenuDropdown");
      menuBtn.addEventListener("click", (e)=>{ e.stopPropagation(); dropdown.classList.toggle("show"); });
      document.addEventListener("click", (e)=>{ if (!document.querySelector(".user-menu").contains(e.target)) dropdown.classList.remove("show"); });

      // Topbar scroll subtle shadow (already sticky)
      window.addEventListener("scroll", () => {
        const btn = document.getElementById("scrollTopBtn");
        if (window.scrollY > 220) btn.classList.add("show"); else btn.classList.remove("show");
      });

      // Control buttons
      document.getElementById("themeToggle").addEventListener("click", toggleTheme);
      document.getElementById("refreshBalanceBtn").addEventListener("click", () => {
        document.getElementById("balanceAmount").textContent = fmtCurrency(mockBalance.balance);
        document.getElementById("walletAddress").textContent = `Wallet: ${mockBalance.wallet_address}`;
        showToast("success","Balance refreshed");
      });
      document.getElementById("scrollTopBtn").addEventListener("click", () => window.scrollTo({ top:0, behavior:"smooth" }));

      // Mock quick actions (no modal needed here)
      document.getElementById("sendMoneyBtn").addEventListener("click", ()=> showToast("warning","Send Money coming soon (mock)"));
      document.getElementById("receiveMoneyBtn").addEventListener("click", ()=> showToast("success","Receive via QR coming soon (mock)"));
      document.getElementById("addMoneyBtn").addEventListener("click", ()=> showToast("success","‚Ç¶10,000 added (mock)"));
      document.getElementById("bankTransferBtn").addEventListener("click", ()=> showToast("warning","Bank list loading (mock)"));

      // Services ‚Äì open agent modal ONLY on click
      document.querySelectorAll(".service-card").forEach(c=>{
        c.addEventListener("click", () => {
          if (c.dataset.service === "agent") openAgentModal();
          else showToast("success", `${c.querySelector("h4").textContent} (mock)`);
        });
      });

      // Agent modal events
      document.getElementById("closeAgentModal").addEventListener("click", closeAgentModal);
      document.getElementById("cancelAgentBtn").addEventListener("click", closeAgentModal);
      document.getElementById("agentModal").addEventListener("click", (e)=> { if (e.target.id === "agentModal") closeAgentModal(); });
      document.getElementById("submitAgentBtn").addEventListener("click", (e)=>{
        e.preventDefault();
        const full = document.getElementById("agentFullName").value.trim();
        const nin  = document.getElementById("agentNIN").value.trim();
        const pic  = document.getElementById("agentPhoto").files[0];
        if (!full || nin.length !== 11 || !pic) { showToast("error","Please complete all fields (NIN must be 11 digits)"); return; }
        closeAgentModal();
        showToast("success","‚úÖ Agent application submitted");
      });

      // Mock user header bits
      document.getElementById("userName").textContent = currentUser.full_name.split(" ")[0];
      document.getElementById("balanceAmount").textContent = fmtCurrency(mockBalance.balance);
      document.getElementById("walletAddress").textContent = `Wallet: ${mockBalance.wallet_address}`;

      // Transactions
      renderTransactions(false);
      document.getElementById("loadMoreBtn").addEventListener("click", ()=> renderTransactions(true));
    });
  </script>
</body>
</html>
