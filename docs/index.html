<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DemiPay v5.5 ‚Äî Money Moves</title>

  <!-- External styles (keep your existing files) -->
  <link rel="stylesheet" href="./src/css/global.css" />
  <link rel="stylesheet" href="./src/css/dashboard.css" />

  <style>
    :root{
      --accent-color:#2dd4bf;
      --accent-2:#3b82f6;
      --gradient-accent:linear-gradient(90deg,#2dd4bf,#3b82f6);
      --radius:12px;
    }

    /* ===== Navbar (Glass + Centered) ===== */
    .navbar{
      position: sticky;
      top: 0;
      z-index: 1000;
      background: rgba(255,255,255,.85);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid #eef2f7;
      transition: box-shadow .25s ease;
    }
    body.scrolled .navbar{ box-shadow: 0 6px 24px rgba(0,0,0,.06); }

    .navbar-container{
      max-width: 1100px;
      margin: 0 auto;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .navbar-brand{display:flex;align-items:center;gap:8px;font-weight:700}
    .logo-icon{font-size:1.25rem}
    .version-badge{
      font-size:.75rem;
      background:#eef2ff;
      color:#374151;
      padding:2px 8px;border-radius:999px
    }

    .navbar-menu{display:flex;align-items:center;gap:10px}
    .user-menu{position:relative}
    .user-menu-btn{
      display:flex;align-items:center;gap:8px;
      padding:8px 10px;border:1px solid #e5e7eb;border-radius:999px;background:#fff;cursor:pointer;
    }
    .user-avatar{width:26px;height:26px;border-radius:999px;object-fit:cover}

    .user-menu-dropdown{
      position:absolute;right:0;top:45px;background:#fff;border-radius:10px;
      box-shadow:0 10px 24px rgba(0,0,0,.12);padding:8px 0;display:none;min-width:180px
    }
    .user-menu-dropdown.show{display:block;animation:fadeIn .2s ease}
    .user-menu-dropdown .menu-item{
      display:flex;align-items:center;gap:8px;padding:10px 14px;color:#111827;text-decoration:none
    }
    .user-menu-dropdown .menu-item:hover{background:#f9fafb}
    .menu-divider{height:1px;background:#eef2f7;margin:6px 0}

    @keyframes fadeIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}

    /* ===== Page layout ===== */
    .main-content{padding: 24px 16px;}
    .container{max-width:1100px;margin:0 auto}

    /* ===== Welcome header with gradient name ===== */
    .welcome-section h1{font-size:clamp(24px,3vw,30px);margin:6px 0 2px}
    .gradient-text{
      background:linear-gradient(90deg,var(--accent-color),var(--accent-2));
      -webkit-background-clip:text;background-clip:text;color:transparent
    }
    /* one-time shimmer pulse */
    .shimmer-once{
      position:relative;
      background-image:linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.65) 50%, rgba(255,255,255,0) 100%);
      background-repeat:no-repeat;background-size:200% 100%;
      animation:shine 1.2s ease forwards;
    }
    @keyframes shine{from{background-position:-120% 0}to{background-position:120% 0}}

    /* ===== Cards / sections (keep your look; minimal base here) ===== */
    .balance-card{
      border:1px solid #eef2f7;border-radius:16px;padding:18px;background:#fff;
      box-shadow:0 6px 20px rgba(0,0,0,.04)
    }
    .balance-header{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}
    .btn{border:none;border-radius:10px;padding:10px 14px;cursor:pointer}
    .btn-primary{background:var(--gradient-accent);color:#fff}
    .btn-secondary{background:#f3f4f6;color:#111827}

    /* ===== Action grid ===== */
    .action-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    .action-card{
      border:1px solid #eef2f7;border-radius:14px;padding:14px;background:#fff;cursor:pointer;
      display:flex;flex-direction:column;gap:4px;align-items:flex-start;
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .action-card:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.06)}

    @media (max-width:900px){.action-grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:520px){.action-grid{grid-template-columns:1fr}}

    /* ===== Transactions ===== */
    .transactions-list{display:flex;flex-direction:column;gap:10px}
    .transaction-item{
      border:1px solid #eef2f7;border-radius:12px;padding:12px;background:#fff;
      display:flex;align-items:center;justify-content:space-between
    }

    /* ===== Scroll to top ===== */
    #scrollTopBtn{
      position:fixed;bottom:28px;right:28px;width:44px;height:44px;border-radius:999px;
      border:none;background:var(--gradient-accent);color:#fff;font-size:18px;display:none;
      align-items:center;justify-content:center;box-shadow:0 8px 22px rgba(0,0,0,.15);z-index:999
    }
    #scrollTopBtn.show{display:flex;animation:fadeInUp .25s ease forwards}
    #scrollTopBtn:hover{transform:translateY(-2px)}

    @keyframes fadeInUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

    /* ===== Toast animations (top-right & bottom-left) ===== */
    .toast{animation:fadeInToast .25s ease, fadeOutToast .25s ease 2.75s forwards}
    @keyframes fadeInToast{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
    @keyframes fadeOutToast{from{opacity:1}to{opacity:0}}
    .toast-bottom{animation:fadeInUp .25s ease, fadeOutDown .25s ease 3.5s forwards}
    @keyframes fadeOutDown{from{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(20px)}}
  </style>
</head>

<body>
  <!-- ===== NAVBAR ===== -->
  <nav class="navbar">
    <div class="navbar-container">
      <div class="navbar-brand" onclick="location.href='index.html'" style="cursor:pointer;">
        <span class="logo-icon">üöÄ</span>
        <span class="logo-text">DemiPay</span>
        <span class="version-badge">v5.5</span>
      </div>

      <div class="navbar-menu">
        <button class="btn btn-secondary btn-sm" id="themeToggle">
          <span id="themeIcon">üåô</span>
          <span id="themeText">Dark Mode</span>
        </button>

        <div class="user-menu">
          <button class="user-menu-btn" id="userMenuBtn">
            <img id="userAvatar" src="./src/assets/user.png" alt="User" class="user-avatar" />
            <span id="userName">Demi</span>
            <span>‚ñº</span>
          </button>
          <div class="user-menu-dropdown" id="userMenuDropdown">
            <a href="#" class="menu-item"><span>üë§</span><span>Profile</span></a>
            <a href="#" class="menu-item"><span>‚öôÔ∏è</span><span>Settings</span></a>
            <div class="menu-divider"></div>
            <a href="#" class="menu-item" id="logoutBtn"><span>üö™</span><span>Logout</span></a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- ===== MAIN ===== -->
  <main class="main-content">
    <div class="container">
      <!-- Welcome -->
      <section class="welcome-section">
        <h1>Welcome back, <span class="gradient-text" id="welcomeName">Demi</span> üëã</h1>
        <p>Here‚Äôs what‚Äôs happening with your wallet today.</p>
      </section>

      <!-- Balance -->
      <section class="balance-section">
        <div class="balance-card">
          <div class="balance-header">
            <div>
              <p class="balance-label">Total Balance</p>
              <h2 class="balance-amount" id="balanceAmount">$0.00</h2>
              <p class="wallet-address" id="walletAddress">Wallet: Loading...</p>
              <p class="wallet-meta">
                Account No: <strong>DP-1029345678</strong><br />
                KYC Level: <span class="kyc-level">Tier 2 (Verified)</span>
              </p>
            </div>
            <button class="btn btn-primary" id="refreshBalanceBtn">üîÑ Refresh</button>
          </div>
        </div>
      </section>

      <!-- Security Banner -->
      <section class="banner banner-security" style="margin-top:14px;border:1px solid #eef2f7;border-radius:14px;padding:12px;background:#fff;display:flex;gap:10px;align-items:center">
        <span class="banner-emoji">üîí</span>
        <div class="banner-text">
          <h4 style="margin:0 0 4px">Security</h4>
          <p style="margin:0">Your wallet is protected with encryption and OTP verification.</p>
        </div>
      </section>

      <!-- Finance Banner -->
      <section class="banner banner-finance" style="margin-top:10px;border:1px solid #eef2f7;border-radius:14px;padding:12px;background:#fff;display:flex;gap:10px;align-items:center">
        <span class="banner-emoji">üíπ</span>
        <div class="banner-text">
          <h4 style="margin:0 0 4px">Finance Updates</h4>
          <p style="margin:0">FX Update: ‚Ç¶1 ‚âà $0.0013 ‚Ä¢ Earn +5% APY bonus this week!</p>
        </div>
      </section>

      <!-- Money Moves -->
      <section class="money-moves" style="margin-top:16px">
        <h3>Money Moves</h3>
        <div class="action-grid">
          <button class="action-card" id="sendMoneyBtn">
            <span class="action-icon">üí∏</span>
            <span class="action-title">Send Money</span>
            <span class="action-desc">Instant P2P Transfer</span>
          </button>
          <button class="action-card" id="receiveMoneyBtn">
            <span class="action-icon">üì•</span>
            <span class="action-title">Receive Money</span>
            <span class="action-desc">QR & Account Share</span>
          </button>
          <button class="action-card" id="addMoneyBtn">
            <span class="action-icon">‚ûï</span>
            <span class="action-title">Add / Withdraw</span>
            <span class="action-desc">Card or Bank (Mock)</span>
          </button>
          <button class="action-card" id="bankTransferBtn">
            <span class="action-icon">üè¶</span>
            <span class="action-title">Bank Transfer</span>
            <span class="action-desc">Multi-Region Banks</span>
          </button>
        </div>
      </section>

      <!-- Services -->
      <section class="quick-services" style="margin-top:18px">
        <h3>Services</h3>
        <div class="action-grid services-grid">
          <div class="action-card service-card" data-service="fx">üåç
            <h4>Cross-Border Remittance</h4><p>Preview FX & Send Abroad</p>
          </div>
          <div class="action-card service-card" data-service="savings">üí∞
            <h4>Savings</h4><p>Create ‚Ä¢ Add ‚Ä¢ Withdraw ‚Ä¢ SO</p>
          </div>
          <div class="action-card service-card" data-service="bills">üí°
            <h4>Pay Bills & Top-Up</h4><p>Bundles ‚Ç¶500‚Äì‚Ç¶5 000</p>
          </div>
          <div class="action-card service-card" data-service="cards">üí≥
            <h4>Virtual & Linked Cards</h4><p>Add ‚Ä¢ Link ‚Ä¢ Set Default</p>
          </div>
          <div class="action-card service-card" data-service="payonline">üõí
            <h4>Pay Online</h4><p>Checkout Simulation</p>
          </div>
          <div class="action-card service-card" data-service="shop">üè¨
            <h4>Shop on the Fly</h4><p>Affiliate Redirection</p>
          </div>
          <div class="action-card service-card" data-service="invest">üìà
            <h4>Investments & Stocks</h4><p>Mock Buy/Sell & Portfolio</p>
          </div>
          <div class="action-card service-card" data-service="agent">üßç‚Äç‚ôÇÔ∏è
            <h4>Become an Agent</h4><p>Photo Upload + NIN</p>
          </div>
        </div>
      </section>

      <!-- Agent Modal (hidden by default ‚Äì no auto-open) -->
      <div id="agentModal" class="modal-overlay d-none" style="position:fixed;inset:0;background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;z-index:1200">
        <div class="modal" style="width:min(560px,92vw);background:#fff;border-radius:16px;box-shadow:0 20px 48px rgba(0,0,0,.22);overflow:hidden">
          <div class="modal-header" style="display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #eef2f7">
            <h3 style="margin:0">Become an Agent</h3>
            <button class="close-btn" id="closeAgentModal" style="border:none;background:transparent;font-size:18px;cursor:pointer">‚úï</button>
          </div>
          <div class="modal-body" style="padding:16px">
            <form id="agentForm">
              <div class="form-group" style="margin-bottom:10px">
                <label>Full Name</label>
                <input type="text" id="agentFullName" class="form-control" placeholder="John Doe" required style="width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:10px">
              </div>
              <div class="form-group" style="margin-bottom:10px">
                <label>National Identification Number (NIN)</label>
                <input type="text" id="agentNIN" class="form-control" placeholder="Enter 11-digit NIN" maxlength="11" required style="width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:10px">
              </div>
              <div class="form-group">
                <label>Upload or Capture Photo ID</label>
                <input type="file" id="agentPhoto" class="form-control" accept="image/*" capture="camera" required style="width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:10px">
              </div>
            </form>
          </div>
          <div class="modal-footer" style="padding:12px 16px;display:flex;gap:8px;justify-content:flex-end;border-top:1px solid #eef2f7">
            <button class="btn btn-secondary" id="cancelAgentBtn">Cancel</button>
            <button class="btn btn-primary" id="submitAgentBtn">Submit Application</button>
          </div>
        </div>
      </div>

      <!-- Transactions -->
      <section class="transactions-section" style="margin-top:18px;margin-bottom:80px">
        <div class="section-header" style="display:flex;align-items:center;justify-content:space-between">
          <h3>Recent Transactions</h3>
          <button class="btn btn-secondary btn-sm" id="viewAllBtn">View All</button>
        </div>
        <div id="transactionsList" class="transactions-list">
          <div class="empty-state" style="text-align:center;border:1px dashed #e5e7eb;border-radius:12px;padding:22px;background:#fff">
            <span class="empty-icon" style="font-size:28px">üì≠</span>
            <p style="margin:6px 0 0">No transactions yet</p>
            <p class="text-sm" style="margin:0;color:#6b7280">Start by sending or receiving money</p>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Scroll to Top -->
  <button id="scrollTopBtn" title="Back to Top">‚¨ÜÔ∏è</button>

  <!-- Toast mounts -->
  <div id="globalToast" style="display:none"></div>
  <div id="systemToast" style="display:none"></div>

  <!-- ===== SCRIPTS ===== -->
  <script>
    // Sticky shadow + scroll-to-top
    const scrollBtn = document.getElementById('scrollTopBtn');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 10) document.body.classList.add('scrolled'); else document.body.classList.remove('scrolled');
      if (window.scrollY > 200) scrollBtn.classList.add('show'); else scrollBtn.classList.remove('show');
    });
    scrollBtn.addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

    // User menu toggle (click outside to close)
    const userMenuBtn = document.getElementById('userMenuBtn');
    const userMenuDropdown = document.getElementById('userMenuDropdown');
    userMenuBtn.addEventListener('click', (e)=>{ e.stopPropagation(); userMenuDropdown.classList.toggle('show'); });
    document.addEventListener('click', (e)=>{ if(!document.querySelector('.user-menu').contains(e.target)){ userMenuDropdown.classList.remove('show'); }});

    // Theme toggle + persist
    const themeToggle = document.getElementById('themeToggle');
    function applySavedTheme(){
      const saved = localStorage.getItem('demipay_theme') || 'light';
      if(saved==='dark'){
        document.body.classList.add('dark-mode');
        themeIcon.textContent = '‚òÄÔ∏è';
        themeText.textContent = 'Light Mode';
      }
    }
    const themeIcon = document.getElementById('themeIcon');
    const themeText = document.getElementById('themeText');
    themeToggle.addEventListener('click', ()=>{
      document.body.classList.toggle('dark-mode');
      const isDark = document.body.classList.contains('dark-mode');
      themeIcon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
      themeText.textContent = isDark ? 'Light Mode' : 'Dark Mode';
      localStorage.setItem('demipay_theme', isDark ? 'dark' : 'light');
      showToast('success', isDark ? 'üåô Dark Mode Enabled' : '‚òÄÔ∏è Light Mode Restored');
    });
    applySavedTheme();

    // Welcome gradient shimmer once
    const welcomeNameEl = document.getElementById('welcomeName');
    welcomeNameEl.classList.add('shimmer-once');
    welcomeNameEl.addEventListener('animationend', ()=> welcomeNameEl.classList.remove('shimmer-once'));

    // Toasts (top-right)
    function showToast(type, message){
      let toast = document.getElementById('globalToast');
      if(!toast){ toast = document.createElement('div'); toast.id='globalToast'; document.body.appendChild(toast); }
      toast.innerHTML = message;
      toast.className = 'toast toast-'+type;
      toast.style.cssText = `
        position:fixed;top:20px;right:20px;padding:12px 18px;border-radius:10px;color:#fff;
        z-index:9999;box-shadow:0 10px 24px rgba(0,0,0,.18);opacity:0;transition:.25s;
        background:${ type==='success' ? 'linear-gradient(90deg,#22c55e,#16a34a)' :
                    type==='warning' ? 'linear-gradient(90deg,#facc15,#f59e0b)' :
                    'linear-gradient(90deg,#ef4444,#dc2626)' };
      `;
      toast.style.display='block';
      requestAnimationFrame(()=>{ toast.style.opacity='1'; });
      setTimeout(()=>{ toast.style.opacity='0'; setTimeout(()=> toast.style.display='none',250); }, 3000);
    }

    // System toasts (bottom-left)
    function showSystemToast(type, message){
      let toast = document.getElementById('systemToast');
      if(!toast){ toast = document.createElement('div'); toast.id='systemToast'; document.body.appendChild(toast); }
      toast.innerHTML = message;
      toast.className = 'toast-bottom toast-'+type;
      toast.style.cssText = `
        position:fixed;bottom:20px;left:20px;padding:12px 18px;border-radius:10px;color:#fff;
        z-index:9999;box-shadow:0 10px 24px rgba(0,0,0,.18);opacity:0;transition:.25s;
        background:${ type==='success' ? 'linear-gradient(90deg,#16a34a,#22c55e)' :
                    type==='warning' ? 'linear-gradient(90deg,#facc15,#f59e0b)' :
                    'linear-gradient(90deg,#dc2626,#ef4444)' };
      `;
      toast.style.display='flex';
      requestAnimationFrame(()=>{ toast.style.opacity='1'; });
      setTimeout(()=>{ toast.style.opacity='0'; setTimeout(()=> toast.style.display='none',300); }, 3500);
    }

    // ===== Agent Modal (no auto-open) =====
    const agentCard = document.querySelector('[data-service="agent"]');
    const agentModal = document.getElementById('agentModal');
    const closeAgentModal = document.getElementById('closeAgentModal');
    const cancelAgentBtn = document.getElementById('cancelAgentBtn');
    const submitAgentBtn = document.getElementById('submitAgentBtn');

    if(agentCard){
      agentCard.addEventListener('click', ()=>{
        agentModal.classList.remove('d-none');
        document.body.style.overflow='hidden';
      });
    }
    [closeAgentModal, cancelAgentBtn].forEach(btn => btn.addEventListener('click', ()=>{
      agentModal.classList.add('d-none');
      document.body.style.overflow='auto';
    }));
    agentModal.addEventListener('click', (e)=>{ if(e.target===agentModal){ agentModal.classList.add('d-none'); document.body.style.overflow='auto'; }});

    // Agent form (mock)
    submitAgentBtn.addEventListener('click', (e)=>{
      e.preventDefault();
      const name = document.getElementById('agentFullName').value.trim();
      const nin = document.getElementById('agentNIN').value.trim();
      const photo = document.getElementById('agentPhoto').files[0];
      if(!name || nin.length!==11 || !photo){ showSystemToast('warning','‚ö†Ô∏è Please complete all fields (11-digit NIN).'); return; }
      showToast('success','‚úÖ Agent application submitted (mock)');
      agentModal.classList.add('d-none');
      document.getElementById('agentForm').reset();
      document.body.style.overflow='auto';
    });

    // Example: mock refresh balance & recent transactions hooks
    document.getElementById('refreshBalanceBtn').addEventListener('click', ()=> showToast('success','üîÑ Balance refreshed (mock)'));
  </script>
</body>
</html>
